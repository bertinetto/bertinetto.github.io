{{ define "main" }}
<div class="wrapper">
  <div class="content" style="max-width: 100%; margin: 0;">
    <h1>{{ .Page.Title }}</h1>
    <br/>
    {{ .Content }}

    <style>
      @media (max-width: 768px) {
        .thumbnail {
          display: none !important;
        }
        .content-wrapper {
          gap: 0 !important;
        }
      }
    </style>

    <div class="research-list">
      {{ range sort .Pages "Params.year" "desc" }}
      <div class="research-item" {{ if .Params.highlight }}style="background-color: #fff3e0; padding: 15px; border-radius: 5px;"{{ end }}>
        <h1>
          <span style="font-weight: normal;">[{{ .Params.conference }} {{ .Params.year }}]</span>
          <a href="{{ .Params.arxiv }}" title="{{ .Title }}">{{ .Title }}</a>
        </h1>
        {{ if and .Site.Params.showAuthors .Params.authors }}
        <div class="authors" style="font-style: italic; margin: -5px 0 15px 0; color: #666;">
          {{ $websiteAuthor := .Site.Params.websiteAuthor }}
          {{ $authors := .Params.authors }}
          {{ $len := len $authors }}
          {{ range $index, $author := $authors }}
            {{ $cleanAuthor := replaceRE "\\s*\\*$" "" $author }}
            {{ if eq $cleanAuthor $websiteAuthor }}
              <span style="text-decoration: underline;">{{ $cleanAuthor }}</span>{{ if strings.HasSuffix $author "*" }}<sup>*</sup>{{ end }}
            {{ else }}
              {{ $cleanAuthor }}{{ if strings.HasSuffix $author "*" }}<sup>*</sup>{{ end }}
            {{ end }}
            {{- if not (eq (add $index 1) $len) -}}
              {{- if eq (add $index 2) $len -}}
                {{ " and " }}
              {{- else if not (eq (add $index 1) $len) -}}
                {{ ", " }}
              {{- end -}}
            {{- end -}}
          {{ end }}
        </div>
        {{ end }}
        <div class="content-wrapper" style="display: flex; gap: 20px;">
          {{ $thumbWidth := default "25%" .Params.thumbnail_width }}
          <div class="thumbnail" style="flex: 0 0 {{ $thumbWidth }};">
            {{ if .Params.thumbnail }}
              <img src="{{ .Params.thumbnail }}" alt="{{ .Title }}" style="width: 100%; height: auto;">
            {{ end }}
          </div>
          <div class="details" style="flex: 1;">
            <p>{{ .Params.tldr }}</p>
          </div>
        </div>
      </div>
      <hr>
      {{ end }}
    </div>
  </div>
</div>
{{ end }} 